{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Windows.10/Desktop/ReactJs/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Windows.10/Desktop/ReactJs/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Windows.10/Desktop/ReactJs/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Windows.10/Desktop/ReactJs/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Windows.10\\\\Desktop\\\\ReactJs\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var FeedbackContext=/*#__PURE__*/createContext();export var FeedbackProvider=function FeedbackProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),feedback=_useState2[0],setFeedback=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState({item:{},edit:false}),_useState6=_slicedToArray(_useState5,2),feedbackEdit=_useState6[0],setFeedbackEdit=_useState6[1];useEffect(function(){fetchFeedback();},[]);//fetch Feedback\nvar fetchFeedback=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/feedback?_sort=id&_order=desc\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setFeedback(data);setIsLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchFeedback(){return _ref2.apply(this,arguments);};}();var updateFeedback=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,updItem){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/feedback/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updItem)});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;setFeedback(feedback.map(function(item){return item.id===id?_objectSpread(_objectSpread({},item),data):item;}));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function updateFeedback(_x,_x2){return _ref3.apply(this,arguments);};}();var editFeedback=function editFeedback(item){setFeedbackEdit({item:item,edit:true});};var deleteFeedback=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!window.confirm(\"Are you sure you want to delete?\")){_context3.next=4;break;}_context3.next=3;return fetch(\"/feedback/\".concat(id),{method:'DELETE'});case 3:setFeedback(feedback.filter(function(item){return item.id!==id;}));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteFeedback(_x3){return _ref4.apply(this,arguments);};}();var addFeedback=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(newFeedback){var response,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch('/feedback',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newFeedback)});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;setFeedback([data].concat(_toConsumableArray(feedback)));case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function addFeedback(_x4){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(FeedbackContext.Provider,{value:{feedback:feedback,feedbackEdit:feedbackEdit,isLoading:isLoading,deleteFeedback:deleteFeedback,addFeedback:addFeedback,editFeedback:editFeedback,updateFeedback:updateFeedback},children:children});};export default FeedbackContext;","map":{"version":3,"names":["createContext","useState","useEffect","FeedbackContext","FeedbackProvider","children","feedback","setFeedback","isLoading","setIsLoading","item","edit","feedbackEdit","setFeedbackEdit","fetchFeedback","fetch","response","json","data","updateFeedback","id","updItem","method","headers","body","JSON","stringify","map","editFeedback","deleteFeedback","window","confirm","filter","addFeedback","newFeedback"],"sources":["C:/Users/Windows.10/Desktop/ReactJs/my-app/src/context/FeedbackContext.js"],"sourcesContent":["import { createContext,useState,useEffect } from \"react\";\r\n\r\n\r\nconst FeedbackContext =createContext ()\r\n\r\nexport const FeedbackProvider=({children})=>{\r\nconst [feedback,setFeedback]=useState([])\r\nconst [isLoading,setIsLoading]=useState(true)\r\nconst [feedbackEdit,setFeedbackEdit]=useState({\r\n  item:{},\r\n  edit:false\r\n})\r\n\r\nuseEffect(()=>{\r\n  fetchFeedback()\r\n},[])\r\n\r\n//fetch Feedback\r\nconst fetchFeedback=async()=>{\r\n const response=await fetch(`/feedback?_sort=id&_order=desc`) \r\n const data=await response.json()\r\n setFeedback(data)\r\n setIsLoading(false)\r\n}\r\n\r\nconst updateFeedback= async(id,updItem)=>{\r\n  const response=await fetch(`/feedback/${id}`,\r\n  {\r\n    method:'PUT',\r\n    headers:{\r\n      'Content-Type':'application/json'\r\n    },\r\n    body:JSON.stringify(updItem)\r\n  })\r\n  const data=await response.json()\r\n  setFeedback(\r\n    feedback.map((item)=>(item.id===id?{...item,...data}:item))\r\n  )\r\n}\r\n\r\nconst editFeedback=(item)=>{\r\n  setFeedbackEdit({\r\n    item,\r\n    edit:true\r\n  })\r\n}\r\n\r\nconst deleteFeedback =async(id)=>{\r\n  if(window.confirm(\"Are you sure you want to delete?\")){\r\n    await fetch(`/feedback/${id}`,{method:'DELETE'})\r\n      setFeedback(feedback.filter((item)=> item.id !== id))\r\n  }\r\n\r\n}\r\n\r\nconst addFeedback= async (newFeedback)=>{\r\n  const response=await fetch('/feedback',\r\n  {\r\n    method:'POST',\r\n    headers:{\r\n      'Content-Type':'application/json'},\r\n      body: JSON.stringify(newFeedback),\r\n     \r\n    })\r\n  \r\n\r\n  const data=await response.json()\r\n  setFeedback([data, ...feedback])\r\n\r\n}\r\n    \r\n    return <FeedbackContext.Provider \r\n    value={{\r\n      feedback,\r\n      feedbackEdit,\r\n      isLoading,\r\n      deleteFeedback,\r\n      addFeedback,\r\n      editFeedback,\r\n      updateFeedback\r\n    }}\r\n    >\r\n        {children}\r\n    </FeedbackContext.Provider>\r\n}\r\nexport default FeedbackContext;"],"mappings":"opBAAA,OAASA,aAAT,CAAuBC,QAAvB,CAAgCC,SAAhC,KAAiD,OAAjD,C,2CAGA,GAAMC,gBAAe,cAAEH,aAAa,EAApC,CAEA,MAAO,IAAMI,iBAAgB,CAAC,QAAjBA,iBAAiB,MAAc,IAAZC,SAAY,MAAZA,QAAY,CAC5C,cAA6BJ,QAAQ,CAAC,EAAD,CAArC,wCAAOK,QAAP,eAAgBC,WAAhB,eACA,eAA+BN,QAAQ,CAAC,IAAD,CAAvC,yCAAOO,SAAP,eAAiBC,YAAjB,eACA,eAAqCR,QAAQ,CAAC,CAC5CS,IAAI,CAAC,EADuC,CAE5CC,IAAI,CAAC,KAFuC,CAAD,CAA7C,yCAAOC,YAAP,eAAoBC,eAApB,eAKAX,SAAS,CAAC,UAAI,CACZY,aAAa,GACd,CAFQ,CAEP,EAFO,CAAT,CAIA;AACA,GAAMA,cAAa,2FAAC,2KACEC,MAAK,kCADP,QACbC,QADa,qCAEFA,SAAQ,CAACC,IAAT,EAFE,QAEbC,IAFa,eAGnBX,WAAW,CAACW,IAAD,CAAX,CACAT,YAAY,CAAC,KAAD,CAAZ,CAJmB,sDAAD,kBAAbK,cAAa,2CAAnB,CAOA,GAAMK,eAAc,2FAAE,kBAAMC,EAAN,CAASC,OAAT,+JACCN,MAAK,qBAAcK,EAAd,EAC1B,CACEE,MAAM,CAAC,KADT,CAEEC,OAAO,CAAC,CACN,eAAe,kBADT,CAFV,CAKEC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAeL,OAAf,CALP,CAD0B,CADN,QACdL,QADc,uCASHA,SAAQ,CAACC,IAAT,EATG,QASdC,IATc,gBAUpBX,WAAW,CACTD,QAAQ,CAACqB,GAAT,CAAa,SAACjB,IAAD,QAASA,KAAI,CAACU,EAAL,GAAUA,EAAV,gCAAiBV,IAAjB,EAAyBQ,IAAzB,EAA+BR,IAAxC,EAAb,CADS,CAAX,CAVoB,wDAAF,kBAAdS,eAAc,iDAApB,CAeA,GAAMS,aAAY,CAAC,QAAbA,aAAa,CAAClB,IAAD,CAAQ,CACzBG,eAAe,CAAC,CACdH,IAAI,CAAJA,IADc,CAEdC,IAAI,CAAC,IAFS,CAAD,CAAf,CAID,CALD,CAOA,GAAMkB,eAAc,2FAAE,kBAAMT,EAAN,0HACjBU,MAAM,CAACC,OAAP,CAAe,kCAAf,CADiB,iDAEZhB,MAAK,qBAAcK,EAAd,EAAmB,CAACE,MAAM,CAAC,QAAR,CAAnB,CAFO,QAGhBf,WAAW,CAACD,QAAQ,CAAC0B,MAAT,CAAgB,SAACtB,IAAD,QAASA,KAAI,CAACU,EAAL,GAAYA,EAArB,EAAhB,CAAD,CAAX,CAHgB,wDAAF,kBAAdS,eAAc,8CAApB,CAQA,GAAMI,YAAW,2FAAE,kBAAOC,WAAP,+JACInB,MAAK,CAAC,WAAD,CAC1B,CACEO,MAAM,CAAC,MADT,CAEEC,OAAO,CAAC,CACN,eAAe,kBADT,CAFV,CAIIC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeQ,WAAf,CAJV,CAD0B,CADT,QACXlB,QADW,uCAWAA,SAAQ,CAACC,IAAT,EAXA,QAWXC,IAXW,gBAYjBX,WAAW,EAAEW,IAAF,4BAAWZ,QAAX,GAAX,CAZiB,wDAAF,kBAAX2B,YAAW,8CAAjB,CAgBI,mBAAO,KAAC,eAAD,CAAiB,QAAjB,EACP,KAAK,CAAE,CACL3B,QAAQ,CAARA,QADK,CAELM,YAAY,CAAZA,YAFK,CAGLJ,SAAS,CAATA,SAHK,CAILqB,cAAc,CAAdA,cAJK,CAKLI,WAAW,CAAXA,WALK,CAMLL,YAAY,CAAZA,YANK,CAOLT,cAAc,CAAdA,cAPK,CADA,UAWFd,QAXE,EAAP,CAaH,CA/EM,CAgFP,cAAeF,gBAAf"},"metadata":{},"sourceType":"module"}